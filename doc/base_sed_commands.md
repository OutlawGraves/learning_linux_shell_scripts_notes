#基本sed命令
sed命令集由25个命令组成.

###1.sed命令的语法
行地址对于任何命令都是可选的，这些命令的语法格式为`[address] command`,而有些命令只接受单行地址,它们不能接受应用于某个范围的行,语法格式为`[line-address] command`

命令可以用大括号进行分组以使其作用于同一个地址
```
address {
	command1
	command2
	command3
}
```

###2.注释
注释主要用于描述脚本的作用,注释行第一个字符必须是"#"号

###3.替换
`[address]s/pattern/replacement/flags`

这里的flags是:
+ n 1到512的一个数字,表示对本模式中指定模式第n次出现的情况进行替换
+ g 对模式空间的所有出现的情况进行全局更改
+ p 打印模式空间的内容
+ w file 将模式空间的内容写到文件file中

如果模式包含斜杠,那么可以选择另一个字符作为定界符,例如感叹号`s!/usr/mail!/usr2/mail!`

定界符出现了3次且必须在replacement之后是必须的,不管使用哪种定界符,如果它出现在正则表达式中,或者在替换文本中,那么必须使用反斜杠来进行转义

replacement是一个字符串,用来替换与正则表达式匹配的内容.在replacement部分,只有下列字符具有特殊含义:
+ & 用正则表达式匹配的内容进行替换
+ \n 匹配第n个子串(n是一个数字),这个子串以前在pattern中用"\("和"\)"指定.
+ \ 当在替换部分包含＆，\和替换命令的定界符时可用\转义它们.可用于转义换行符并创建多行replacement字符串.

flag字符可组合使用只要是有意义的.

#####1.替换元字符
替换元字符是反斜杠(\),"与"符号(&)和\n.反斜杠一般用于转义其他的元字符,但是它在替换字符串中也用于包含换行符.

```
/^\.Ah/{
s/\.Ah */\
\
@A head = /
s/"//g
s/$/\
/
}
```
#####2.校正索引条目

###4.删除
如果某行匹配这个地址,那么就删除整个行,而不是删除行中匹配的部分`sed "/^$/d"`

###5.追加,插入和更改
追加(a)，插入(i)和更改(c)命令提供了通常在交互式编辑器中执行的编辑功能.

```
追加[line-address]a\text
插入[line-address]i\text
更改[address]c\text
```
追加命令和插入命令在行地址所在之后和之前插入文本内容,这两个命令都只能应用于单个行地址,更改命令则可以应用于一个行范围.

###6.列表

###7.转换
`sed [address]y/abc/xyz/`

转换命令中按位置将字符串abc中的每个字符,都转换为字符串xyz中等价字符.

###8.打印
打印命令(p)输出模式空间的内容.它不清除模式空间也不改变脚本中的控制流.

```
#n 在打印改变之前和之后打印行
/^\.Ah/{
	p
	s/*//g
	s/^\.Ah//p
}
```
这是使用打印命令来进行调试的脚本.这里打印标志被提供给替换命令.替换命令的打印标志不同于打印命令,因为它以成功的替换为条件.

###9.打印行号
跟在地址后面的等号(=)打印被匹配的行的行号.除非抑制行的自动输出,行号和行本身将被打印.`[line-address]=`,这个命令不能对一个范围的行进行操作

```
	#n  打印行之前先打印该行的行号
	1,${
		=
		p
	}
```

###10.下一步
下一步命令输出模式空间的内容,然后读取输入的下一行,而不用返回到脚本的顶端.语法为`[address]n`

next命令改变了正常的流控制,直到到达脚本的底部才会输出模式空间的内容,它总是在读取新行之后从脚本的顶端开始.实际上,next命令导致输入下一行取代模式空间的当前行,脚本中的后续命令应用于替换后的行,而不是当前行。
```
	/^\.H1/{
		n
		/*$/d
	}
```

在较长的脚本中,必须记住出现在next命令之前的命令不会应用于新的输入行,而且出现在后面的命令不应用于旧的输入行.

###11.读和写文件

读和写命令用于直接处理文件.这个两个命令都只有一个参数,即文件名,语法为`[line-address]r file,[address]w file`

读命令将由file指定的文件确定的行之后的内容读入模式空间,它不能对一个范围内的行进行操作,写命令将模式空间的内容写入file中.

###12.退出

退出命令(q)会使sed停止读取新的输入行(并停止将它们发送到输出).`[line-address]q`只适用于单行地址.一旦找到和address匹配的行,那么脚本就结束.








